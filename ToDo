Try to add softendstops : https://github.com/Smoothieware/Smoothieware/pull/1149/files 
to master : https://github.com/Smoothieware/Smoothieware/tree/master
If okay, add your hacks
